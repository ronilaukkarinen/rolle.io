(function(a){"use strict",a.fn.lifestream=function(b){return this.each(function(){var c=a(this),d=jQuery.extend({classname:"lifestream",feedloaded:null,limit:10,list:[]},b),e={count:d.list.length,items:[]},f=jQuery.extend(!0,{},d),g=function(b){a.merge(e.items,b),e.items.sort(function(a,b){return b.date-a.date});var f=e.items,g=f.length<d.limit?f.length:d.limit,h=0,i,j=a('<ul class="'+d.classname+'"/>');for(;h<g;h++)i=f[h],i.html&&a('<li class="'+d.classname+"-"+i.config.service+'">').data("name",i.config.service).data("url",i.url||"#").data("time",i.date).append(i.html).appendTo(j);c.html(j),a.isFunction(d.feedloaded)&&d.feedloaded()},h=function(){var b=0,c=d.list.length;delete f.list;for(;b<c;b++){var e=d.list[b];a.fn.lifestream.feeds[e.service]&&a.isFunction(a.fn.lifestream.feeds[e.service])&&e.user&&(e._settings=f,a.fn.lifestream.feeds[e.service](e,g))}};jQuery.tmpl?h():jQuery.getScript("//ajax.aspnetcdn.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js",h)})},a.fn.lifestream.createYqlUrl=function(a){return(("https:"===document.location.protocol?"https":"http")+"://query.yahooapis.com/v1/public/yql?q=__QUERY__"+"&env="+"store://datatables.org/alltableswithkeys&format=json").replace("__QUERY__",encodeURIComponent(a))},a.fn.lifestream.feeds=a.fn.lifestream.feeds||{},Object.keys||(Object.keys=function(a){if(a!==Object(a))throw new TypeError("Object.keys called on non-object");var b=[],c;for(c in a)Object.prototype.hasOwnProperty.call(a,c)&&b.push(c);return b})})(jQuery),function(a){a.fn.lifestream.feeds.disqus=function(b,c){var d=a.extend({},{post:'commented on <a href="${url}">${thread.title}</a>',thread_like:'liked <a href="${url}">${thread.title}</a>'},b.template),e=function(c){var e=[],f=0,g,h;if(c){g=c.length;for(;f<g;f++)h=c[f],h.type!=="reply"&&e.push({date:new Date(h.createdAt),config:b,html:a.tmpl(d[h.type],h.object)})}return e};a.ajax({url:"https://disqus.com/api/3.0/users/listActivity.json",data:{user:b.user,api_key:b.key},dataType:"jsonp",success:function(a){a.code===2?(c([]),console&&console.error&&console.error("Error loading Disqus stream.",a.response)):c(e(a.response))}});return{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.flickr=function(b,c){var d=a.extend({},{posted:'posted a photo <a href="${link}">${title}</a>'},b.template);a.ajax({url:"http://api.flickr.com/services/feeds/photos_public.gne?id="+b.user+"&lang=en-us&format=json",dataType:"jsonp",jsonp:"jsoncallback",success:function(e){var f=[],g=0,h;if(e&&e.items&&e.items.length>0){h=e.items.length;for(;g<h;g++){var i=e.items[g];f.push({date:new Date(i.published),config:b,html:a.tmpl(d.posted,i)})}}c(f)}});return{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.foursquare=function(b,c){var d=a.extend({},{checkedin:'checked in @ <a href="${link}">${title}</a>'},b.template),e=function(c){var e=[],f=0,g;if(c.query&&c.query.count&&c.query.count>0){g=c.query.count;for(;f<g;f++){var h=c.query.results.item[f];e.push({date:new Date(h.pubDate),config:b,html:a.tmpl(d.checkedin,h)})}}return e};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from rss where url="https://feeds.foursquare.com/history/'+b.user+'.rss"'),dataType:"jsonp",success:function(a){c(e(a))}});return{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.bitbucket=function(b,c){var d=a.extend({},{commit:'<a href="http://bitbucket.org/${owner}/${name}/changeset/${node}/">committed</a> at <a href="http://bitbucket.org/${owner}/${name}/">${owner}/${name}</a>',pullrequest_fulfilled:'fulfilled a pull request at <a href="http://bitbucket.org/${owner}/${name}/">${owner}/${name}</a>',pullrequest_rejected:'rejected a pull request at <a href="http://bitbucket.org/${owner}/${name}/">${owner}/${name}</a>',pullrequest_created:'created a pull request at <a href="http://bitbucket.org/${owner}/${name}/">${owner}/${name}</a>',create:'created a new project at <a href="http://bitbucket.org/${owner}/${name}/">${owner}/${name}</a>',fork:'forked <a href="http://bitbucket.org/${owner}/${name}/">${owner}/${name}</a>'},b.template),e=["commit","pullrequest_fulfilled","pullrequest_rejected","pullrequest_created","create","fork"],f=function(b){if(a.inArray(b.event,e)!==-1&&b.repository)return b.event==="commit"?a.tmpl(d.commit,{owner:b.repository.owner,name:b.repository.name,node:b.node}):a.tmpl(d[b.event],{owner:b.repository.owner,name:b.repository.name})},g=function(c){var d=[];c.query&&c.query.count&&c.query.count>0&&a.each(c.query.results.json,function(){d.push({date:new Date(this.events.created_on.replace(/-/g,"/")),config:b,html:f(this.events)})});return d};a.ajax({url:a.fn.lifestream.createYqlUrl('select events.event,events.node, events.created_on,events.repository.name, events.repository.owner from json where url = "https://api.bitbucket.org/1.0/users/'+b.user+'/events/"'),dataType:"jsonp",success:function(a){c(g(a))}});return{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.quora=function(b,c){var d=a.extend({},{posted:'<a href="${link}">${title}</a>'},b.template),e=function(a){var b=0,c=a.link.length;for(;b<c;b++){var d=a.link[b];if(typeof d=="string")return d}return""},f=function(c){var f=[],g=[],h=0,i=0,j="";if(c.query&&c.query.count&&c.query.count>0){g=c.query.results.rss.channel.item,i=g.length,j=e(c.query.results.rss.channel);for(;h<i;h++){var k=g[h];f.push({url:j,date:new Date(k.pubDate),config:b,html:a.tmpl(d.posted,k)})}}return f};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://www.quora.com/'+b.user+'/rss"'),dataType:"jsonp",success:function(a){c(f(a))}});return{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.dribbble=function(b,c){var d=a.extend({},{posted:'posted a shot <a href="${url}">${title}</a>'},b.template);a.ajax({url:"http://api.dribbble.com/players/"+b.user+"/shots",dataType:"jsonp",success:function(e){var f=[],g=0,h;if(e&&e.total){h=e.shots.length;for(;g<h;g++){var i=e.shots[g];f.push({date:new Date(i.created_at),config:b,html:a.tmpl(d.posted,i)})}}c(f)}});return{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.vimeo=function(b,c){var d=a.extend({},{liked:'liked <a href="${url}" title="${description}">${title}</a>',posted:'posted <a href="${url}" title="${description}">${title}</a>'},b.template),e=function(c,e){var f=[],g=0,h,i,j=e||"liked",k,l;if(c){h=c.length;for(;g<h;g++)i=c[g],j==="posted"?k=new Date(i.upload_date.replace(" ","T")):k=new Date(i.liked_on.replace(" ","T")),i.description?l=i.description.replace(/"/g,"'").replace(/<.+?>/gi,""):l="",f.push({date:k,config:b,html:a.tmpl(d[j],{url:i.url,description:i.description?i.description.replace(/"/g,"'").replace(/<.+?>/gi,""):"",title:i.title})})}return f};a.ajax({url:a.fn.lifestream.createYqlUrl('SELECT * FROM xml WHERE url="http://vimeo.com/api/v2/'+b.user+'/likes.xml" OR '+'url="http://vimeo.com/api/v2/'+b.user+'/videos.xml"'),dataType:"jsonp",success:function(a){var b=[];a.query.results.videos[0]!=null&&a.query.results.videos[0].video.length>0&&(b=b.concat(e(a.query.results.videos[0].video))),a.query.results.videos[1]!=null&&a.query.results.videos[1].video.length>0&&(b=b.concat(e(a.query.results.videos[1].video,"posted"))),c(b)}});return{template:d}}}(jQuery),function(a){"use strict",a.fn.lifestream.feeds.linkedin=function(b,c){var d=a.extend({},{posted:'<a href="${link}">${title}</a>'},b.template),e="jlsLinkedinCallback"+b.user,f=function(){var a='SELECT * FROM feed WHERE url="'+b.url+'"';b.user&&(a+=' AND link LIKE "%'+b.user+'%"');return a},g=function(c){return{date:new Date(c.pubDate),config:b,html:a.tmpl(d.posted,c)}};window[e]=function(a){var b=[],d=0;if(a.query&&a.query.count&&a.query.count>0)if(a.query.count===1)b.push(g(a.query.results.item));else for(d;d<a.query.count;d++){var e=a.query.results.item[d];b.push(g(e))}c(b)},a.ajax({url:a.fn.lifestream.createYqlUrl(f()),cache:!0,data:{_maxage:300},dataType:"jsonp",jsonpCallback:e});return{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.bitly=function(b,c){var d=a.extend({},{created:'created URL <a href="${short_url}" title="${title}">${short_url}</a>'},b.template);a.ajax({url:a.fn.lifestream.createYqlUrl('select data.short_url, data.created, data.title from json where url="http://bitly.com/u/'+b.user+'.json"'),dataType:"jsonp",success:function(e){var f=[],g=0,h,i;if(e.query&&e.query.count&&e.query.results.json){i=e.query.results.json,h=i.length;for(;g<h;g++){var j=i[g].data;f.push({date:new Date(j.created*1e3),config:b,html:a.tmpl(d.created,j)})}}c(f)}});return{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.delicious=function(b,c){var d=a.extend({},{bookmarked:'bookmarked <a href="${u}">${d}</a>'},b.template);a.ajax({url:"http://feeds.delicious.com/v2/json/"+b.user,dataType:"jsonp",success:function(e){var f=[],g=0,h;if(e&&e.length&&e.length>0){h=e.length;for(;g<h;g++){var i=e[g];f.push({date:new Date(i.dt),config:b,html:a.tmpl(d.bookmarked,i)})}}c(f)}});return{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.formspring=function(b,c){var d=a.extend({},{answered:'answered a question <a href="${link}">${title}</a>'},b.template),e=function(c){var e=[],f,g=0,h,i;if(c.query&&c.query.count&&c.query.count>0&&c.query.results.rss.channel.item){f=c.query.results.rss.channel.item,h=f.length;for(;g<h;g++)i=f[g],e.push({date:new Date(i.pubDate),config:b,html:a.tmpl(d.answered,i)})}return e};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://www.formspring.me/profile/'+b.user+'.rss"'),dataType:"jsonp",success:function(a){c(e(a))}});return{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.facebook_page=function(b,c){var d=a.extend({},{wall_post:'post on wall <a href="${link}">${title}</a>'},b.template),e=function(c){var e=[],f,g=0,h;if(c.query&&c.query.count&&c.query.count>0){f=c.query.results.rss.channel.item,h=f.length;for(;g<h;g++){var i=f[g];a.trim(i.title)&&e.push({date:new Date(i.pubDate),config:b,html:a.tmpl(d.wall_post,i)})}}return e};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="www.facebook.com/feeds/page.php?id='+b.user+'&format=rss20"'),dataType:"jsonp",success:function(a){c(e(a))}});return{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.pocket=function(b,c){var d=a.extend({},{pocketed:'pocketed <a href="${link}">${title}</a>'},b.template),e=function(c){var e=[],f,g=0,h;if(c.query&&c.query.results){f=c.query.results.rss.channel.item,h=f.length;for(;g<h;g++){var i=f[g],j=d.pocketed;e.push({date:new Date(i.pubDate),config:b,url:"http://getpocket.com",html:a.tmpl(j,i)})}}return e};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://www.getpocket.com/users/'+b.user+'/feed/all/"'),dataType:"json",success:function(a){c(e(a))}});return{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.github=function(b,c){var d=a.extend({},{commitCommentEvent:'commented on <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',createBranchEvent:'created branch <a href="http://github.com/${status.repo.name}/tree/${status.payload.ref}">${status.payload.ref}</a> at <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',createRepositoryEvent:'created repository <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',createTagEvent:'created tag <a href="http://github.com/${status.repo.name}/tree/${status.payload.ref}">${status.payload.ref}</a> at <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',deleteBranchEvent:'deleted branch ${status.payload.ref} at <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',deleteTagEvent:'deleted tag ${status.payload.ref} at <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',followEvent:'started following <a href="http://github.com/${status.payload.target.login}">${status.payload.target.login}</a>',forkEvent:'forked <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',gistEvent:'${status.payload.action} gist <a href="http://gist.github.com/${status.payload.gist.id}">${status.payload.gist.id}</a>',issueCommentEvent:'commented on issue <a href="http://github.com/${status.repo.name}/issues/${status.payload.issue.number}">${status.payload.issue.number}</a> on <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',issuesEvent:'${status.payload.action} issue <a href="http://github.com/${status.repo.name}/issues/${status.payload.issue.number}">${status.payload.issue.number}</a> on <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',pullRequestEvent:'${status.payload.action} pull request <a href="http://github.com/${status.repo.name}/pull/${status.payload.number}">${status.payload.number}</a> on <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',pushEvent:'pushed to <a href="http://github.com/${status.repo.name}/tree/${status.payload.ref}">${status.payload.ref}</a> at <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',watchEvent:'started watching <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>'},b.template),e=function(b){if(b.type==="CommitCommentEvent")return a.tmpl(d.commitCommentEvent,{status:b});if(b.type==="CreateEvent"&&b.payload.ref_type==="branch")return a.tmpl(d.createBranchEvent,{status:b});if(b.type==="CreateEvent"&&b.payload.ref_type==="repository")return a.tmpl(d.createRepositoryEvent,{status:b});if(b.type==="CreateEvent"&&b.payload.ref_type==="tag")return a.tmpl(d.createTagEvent,{status:b});if(b.type==="DeleteEvent"&&b.payload.ref_type==="branch")return a.tmpl(d.deleteBranchEvent,{status:b});if(b.type==="DeleteEvent"&&b.payload.ref_type==="tag")return a.tmpl(d.deleteTagEvent,{status:b});if(b.type==="FollowEvent")return a.tmpl(d.followEvent,{status:b});if(b.type==="ForkEvent")return a.tmpl(d.forkEvent,{status:b});if(b.type==="GistEvent"){b.payload.action==="create"?b.payload.action="created":b.payload.action==="update"&&(b.payload.action="updated");return a.tmpl(d.gistEvent,{status:b})}if(b.type==="IssueCommentEvent")return a.tmpl(d.issueCommentEvent,{status:b});if(b.type==="IssuesEvent")return a.tmpl(d.issuesEvent,{status:b});if(b.type==="PullRequestEvent")return a.tmpl(d.pullRequestEvent,{status:b});if(b.type==="PushEvent"){b.payload.ref=b.payload.ref.split("/")[2];return a.tmpl(d.pushEvent,{status:b})}if(b.type==="WatchEvent")return a.tmpl(d.watchEvent,{status:b})},f=function(a){var c=[],d=0,f;if(a.query&&a.query.count&&a.query.count>0){f=a.query.count;for(;d<f;d++){var g=a.query.results.json[d].json;c.push({date:new Date(g.created_at),config:b,html:e(g),url:"https://github.com/"+b.user})}}return c};a.ajax({url:a.fn.lifestream.createYqlUrl('select json.type, json.actor, json.repo, json.payload, json.created_at from json where url="https://api.github.com/users/'+b.user+'/events/public?per_page=100"'),dataType:"jsonp",success:function(a){c(f(a))}});return{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.rss=function(b,c){var d=a.extend({},{posted:'posted <a href="${link}">${title}</a>'},b.template),e=function(a){var b=0,c=a.link.length;for(;b<c;b++){var d=a.link[b];if(typeof d=="string")return d}return""},f=function(c){var f=[],g=[],h=0,i=0,j="";if(c.query&&c.query.count&&c.query.count>0){g=c.query.results.rss.channel.item,i=g.length,j=e(c.query.results.rss.channel);for(;h<i;h++){var k=g[h];f.push({url:j,date:new Date(k.pubDate),config:b,html:a.tmpl(d.posted,k)})}}return f};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="'+b.user+'"'),dataType:"jsonp",success:function(a){c(f(a))}});return{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.wordpress=function(b,c){var d=a.extend({},{posted:'posted <a href="${link}">${title}</a>'},b.template),e=function(c){var e=[],f,g=0,h,i;if(c.query&&c.query.count&&c.query.count>0&&c.query.results.rss.channel.item){f=c.query.results.rss.channel.item,h=f.length;for(;g<h;g++)i=f[g],e.push({date:new Date(i.pubDate),config:b,html:a.tmpl(d.posted,i)})}return e},f="";b.user&&(f=b.user.indexOf("http://")===0?b.user+"/feed":"http://"+b.user+".wordpress.com/feed",a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="'+f+'"'),dataType:"jsonp",success:function(a){c(e(a))}}));return{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.blogger=function(b,c){var d=a.extend({},{posted:'posted <a href="${origLink}">${title}</a>'},b.template),e=function(c){var e=[],f,g=0,h,i,j,k;if(c.query&&c.query.count&&c.query.count>0&&c.query.results.feed.entry){f=c.query.results.feed.entry,h=f.length;for(;g<h;g++){i=f[g];if(!i.origLink){j=0,k=i.link.length;for(;j<k;j++)i.link[j].rel==="alternate"&&(i.origLink=i.link[j].href)}i.origLink&&(i.title.content&&(i.title=i.title.content),e.push({date:new Date(i.published),config:b,html:a.tmpl(d.posted,i)}))}}return e};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://'+b.user+'.blogspot.com/feeds/posts/default"'),dataType:"jsonp",success:function(a){c(e(a))}});return{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.deviantart=function(b,c){var d=a.extend({},{posted:'posted <a href="${link}">${title}</a>'},b.template);a.ajax({url:a.fn.lifestream.createYqlUrl('select title,link,pubDate from rss where url="http://backend.deviantart.com/rss.xml?q=gallery%3A'+encodeURIComponent(b.user)+"&type=deviation"+'" | unique(field="title")'),dataType:"jsonp",success:function(e){var f=[],g,h,i=0,j;if(e.query&&e.query.count>0){g=e.query.results.item,j=g.length;for(;i<j;i++)h=g[i],f.push({date:new Date(h.pubDate),config:b,html:a.tmpl(d.posted,h)})}c(f)}});return{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.googleplus=function(b,c){var d=a.extend({},{posted:'<a href="${actor.url}">${actor.displayName}</a> has posted a new entry <a href="${url}" title="${id}">${title}</a> <!--With--> ${object.replies.totalItems} replies, ${object.plusoners.totalItems} +1s, ${object.resharers.totalItems} Reshares'},b.template),e=function(c){var e=[],f=0,g,h;if(c&&c.items){g=c.items.length;for(;f<g;f++)h=c.items[f],e.push({date:new Date(h.published),config:b,html:a.tmpl(d.posted,h)})}return e};a.ajax({url:"https://www.googleapis.com/plus/v1/people/"+b.user+"/activities/public",data:{key:b.key},dataType:"jsonp",success:function(a){a.error?(c([]),console&&console.error&&console.error("Error loading Google+ stream.",a.error)):c(e(a))}});return{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.tumblr=function(b,c){var d=a.extend({},{posted:'posted a ${type} <a href="${url}">${title}</a>'},b.template),e=b.limit||20,f=function(b){switch(b.type){case"photo":var c=b["photo-url"];return a('<img width="75" height="75"/>').attr({src:c[c.length-1].content,title:i(b),alt:i(b)}).wrap("<div/>").parent().html();case"video":var d=b["video-player"],e=d[d.length-1].content;if(e.match(/<\s*script/))return null;return e;case"audio":return b["audio-player"]+" "+a("<div/>").text(i(b)).html();default:return null}},g=function(b,c){return a(b[c]).filter(":not(:empty):first").text()},h=function(a){var b;switch(a.type){case"regular":return a["regular-title"]||g(a,"regular-body");case"link":b=a["link-text"]||g(a,"link-description"),b===""&&(b=a["link-url"]);return b;case"video":return g(a,"video-caption");case"audio":return g(a,"audio-caption");case"photo":return g(a,"photo-caption");case"quote":return'"'+a["quote-text"].replace(/<.+?>/g," ").trim()+'"';case"conversation":b=a["conversation-title"],b||(b=a.conversation.line,typeof b!="string"&&(b=b[0].label+" "+b[0].content+" ..."));return b;case"answer":return a.question;default:return a.type}},i=function(a){var b=h(a)||"";return b.replace(/<.+?>/gi," ")},j=function(b,c){return{date:new Date(c.date),config:b,html:a.tmpl(d.posted,{type:c.type.replace("regular","blog entry"),url:c.url,image:f(c),title:i(c)})}},k=function(c){var d=[],e=0,f,g;if(c.query&&c.query.count&&c.query.count>0)if(a.isArray(c.query.results.posts.post)){f=c.query.results.posts.post.length;for(;e<f;e++)g=c.query.results.posts.post[e],d.push(j(b,g))}else a.isPlainObject(c.query.results.posts.post)&&d.push(j(b,c.query.results.posts.post));return d};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from tumblr.posts where username="'+b.user+'"'+' and num="'+e+'"'),dataType:"jsonp",success:function(a){c(k(a))}});return{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.lastfm=function(b,c){var d=a.extend({},{loved:'loved <a href="${url}">${name}</a> by <a href="${artist.url}">${artist.name}</a>'},b.template),e=function(c){var e=[],f,g=0,h;if(c.query&&c.query.count&&c.query.count>0&&c.query.results.lovedtracks&&c.query.results.lovedtracks.track){f=c.query.results.lovedtracks.track,h=f.length;for(;g<h;g++){var i=f[g],j=i.nowplaying?new Date:i.date.uts;e.push({date:new Date(parseInt(j*1e3,10)),config:b,html:a.tmpl(d.loved,i)})}}return e};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://ws.audioscrobbler.com/2.0/user/'+b.user+'/lovedtracks.xml"'),dataType:"jsonp",success:function(a){c(e(a))}});return{template:d}}}(jQuery),function(a){"use strict",a.fn.lifestream.feeds.twitter=function(b,c){var d=a.extend({},{posted:"{{html tweet}}"},b.template),e="jlsTwitterCallback"+b.user.replace(/[^a-zA-Z0-9]+/g,""),f=function(a){var b=function(a){return a.replace(/([a-z]+:\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,function(a){return'<a href="'+a+'">'+(a.length>25?a.substr(0,24)+"...":a)+"</a>"})},c=function(a){return a.replace(/(^|[^\w]+)\@([a-zA-Z0-9_]{1,15})/g,function(a,b,c){return b+'<a href="http://twitter.com/'+c+'">@'+c+"</a>"})},d=function(a){return a.replace(/(^|[^\w'"]+)\#([a-zA-Z0-9ÅåÄäÖöØøÆæÉéÈèÜüÊêÛûÎî_]+)/g,function(a,b,c){return b+'<a href="http://search.twitter.com/search?q=%23'+c+'">#'+c+"</a>"})};return d(c(b(a)))},g=function(c){var e=[],g=0,h=c.length;for(g;g<h;g++){var i=c[g];e.push({date:new Date(i.created_at*1e3),config:b,html:a.tmpl(d.posted,{tweet:f(a("<div/>").html(i.text).text()),complete_url:"http://twitter.com/"+b.user+"/status/"+i.id_str}),url:"http://twitter.com/"+b.user})}return e};window[e]=function(a){a.query&&a.query.count>0&&c(g(a.query.results.items))},a.ajax({url:a.fn.lifestream.createYqlUrl('USE "http://arminrosu.github.io/twitter-open-data-table/table.xml" AS twitter; SELECT * FROM twitter WHERE screen_name = "'+b.user+'"'),cache:!0,data:{_maxage:300},dataType:"jsonp",jsonpCallback:e});return{template:d}}}(jQuery),function(a){a.fn.lifestream.feeds.youtube=function(b,c){var d=a.extend({},{uploaded:'uploaded <a href="${video.player.default}" title="${video.description}">${video.title}</a>',favorited:'favorited <a href="${video.player.default}" title="${video.description}">${video.title}</a>'},b.template),e=function(c,e){var f=[],g=0,h,i,j,k,l;if(c.data&&c.data.items){h=c.data.items.length;for(;g<h;g++){i=c.data.items[g];switch(e){case"favorited":j=i.video,k=i.created,l=i;break;case"uploaded":j=i,k=j.uploaded,l={video:j}}if(!j.player||!j.player["default"])continue;f.push({date:new Date(k),config:b,html:a.tmpl(d[e],l)})}}return f};a.ajax({url:"http://gdata.youtube.com/feeds/api/users/"+b.user+"/favorites?v=2&alt=jsonc",dataType:"jsonp",success:function(a){c(e(a,"favorited"))}}),a.ajax({url:"http://gdata.youtube.com/feeds/api/users/"+b.user+"/uploads?v=2&alt=jsonc",dataType:"jsonp",success:function(a){c(e(a,"uploaded"))}});return{template:d}}}(jQuery)
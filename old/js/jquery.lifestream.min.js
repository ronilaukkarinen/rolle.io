/*!
 * jQuery Lifestream Plug-in
 * Show a stream of your online activity
 * @version   0.4.3
 * @author    Christian Vuerings et al.
 * @copyright Copyright 2014, Christian Vuerings - http://denbuzze.com
 * @license   https://github.com/christianv/jquery-lifestream/blob/master/LICENSE MIT
 */
(function(a){a.fn.lifestream=function(b){return this.each(function(){var c=a(this),d=jQuery.extend({classname:"lifestream",feedloaded:null,limit:10,list:[]},b),g={count:d.list.length,items:[]},e=jQuery.extend(true,{},d),h=function(o){a.merge(g.items,o);g.items.sort(function(p,i){return(i.date-p.date)});var j=g.items,n=(j.length<d.limit)?j.length:d.limit,l=0,m,k=a('<ul class="'+d.classname+'"/>');for(;l<n;l++){m=j[l];if(m.html){a('<li class="'+d.classname+"-"+m.config.service+'">').data("name",m.config.service).data("url",m.url||"#").data("time",m.date).append(m.html).appendTo(k)}}c.html(k);if(a.isFunction(d.feedloaded)){d.feedloaded()}},f=function(){var m=0,l=d.list.length;delete e.list;for(;m<l;m++){var k=d.list[m];if(a.fn.lifestream.feeds[k.service]&&a.isFunction(a.fn.lifestream.feeds[k.service])&&k.user){k._settings=e;a.fn.lifestream.feeds[k.service](k,h)}}};if(!jQuery.tmpl){jQuery.getScript("//ajax.aspnetcdn.com/ajax/jquery.templates/beta1/jquery.tmpl.min.js",f)}else{f()}})};a.fn.lifestream.createYqlUrl=function(b){return(("https:"===document.location.protocol?"https":"http")+"://query.yahooapis.com/v1/public/yql?q=__QUERY__&env=store://datatables.org/alltableswithkeys&format=json").replace("__QUERY__",encodeURIComponent(b))};a.fn.lifestream.feeds=a.fn.lifestream.feeds||{};if(!Object.keys){Object.keys=function(d){if(d!==Object(d)){throw new TypeError("Object.keys called on non-object")}var b=[],c;for(c in d){if(Object.prototype.hasOwnProperty.call(d,c)){b.push(c)}}return b}}}(jQuery));(function(a){a.fn.lifestream.feeds.atom=function(c,e){var d=a.extend({},{posted:'posted <a href="${link.href}">${title.content}</a>'},c.template),b=function(g){var f=[],n=[],l=0,k=0,h="";if(g.query&&g.query.count&&g.query.count>0){n=g.query.results.feed.entry;k=n.length;for(;l<k;l++){var m=n[l];f.push({url:m.link.href,date:new Date(m.updated),config:c,html:a.tmpl(d.posted,m)})}}return f};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="'+c.user+'"'),dataType:"jsonp",success:function(f){e(b(f))}});return{template:d}}})(jQuery);(function(a){a.fn.lifestream.feeds.bitbucket=function(b,g){var d=a.extend({},{commit:'<a href="http://bitbucket.org/${owner}/${name}/changeset/${node}/">committed</a> at <a href="http://bitbucket.org/${owner}/${name}/">${owner}/${name}</a>',pullrequest_fulfilled:'fulfilled a pull request at <a href="http://bitbucket.org/${owner}/${name}/">${owner}/${name}</a>',pullrequest_rejected:'rejected a pull request at <a href="http://bitbucket.org/${owner}/${name}/">${owner}/${name}</a>',pullrequest_created:'created a pull request at <a href="http://bitbucket.org/${owner}/${name}/">${owner}/${name}</a>',create:'created a new project at <a href="http://bitbucket.org/${owner}/${name}/">${owner}/${name}</a>',fork:'forked <a href="http://bitbucket.org/${owner}/${name}/">${owner}/${name}</a>'},b.template),f=["commit","pullrequest_fulfilled","pullrequest_rejected","pullrequest_created","create","fork"],e=function(h){if(a.inArray(h.event,f)!==-1){if(h.repository){if(h.event==="commit"){return a.tmpl(d.commit,{owner:h.repository.owner,name:h.repository.name,node:h.node})}else{return a.tmpl(d[h.event],{owner:h.repository.owner,name:h.repository.name})}}}},c=function(i){var h=[];if(i.query&&i.query.count&&i.query.count>0){a.each(i.query.results.json,function(){h.push({date:new Date(this.events.created_on.replace(/-/g,"/")),config:b,html:e(this.events)})})}return h};a.ajax({url:a.fn.lifestream.createYqlUrl('select events.event,events.node, events.created_on,events.repository.name, events.repository.owner from json where url = "https://api.bitbucket.org/1.0/users/'+b.user+'/events/"'),dataType:"jsonp",success:function(h){g(c(h))}});return{template:d}}})(jQuery);(function(a){a.fn.lifestream.feeds.bitly=function(b,d){var c=a.extend({},{created:'created URL <a href="${short_url}" title="${title}">${short_url}</a>'},b.template);a.ajax({url:a.fn.lifestream.createYqlUrl('select data.short_url, data.created, data.title from json where url="http://bitly.com/u/'+b.user+'.json"'),dataType:"jsonp",success:function(f){var e=[],h=0,g,l;if(f.query&&f.query.count&&f.query.results.json){l=f.query.results.json;g=l.length;for(;h<g;h++){var k=l[h].data;e.push({date:new Date(k.created*1000),config:b,html:a.tmpl(c.created,k)})}}d(e)}});return{template:c}}})(jQuery);(function(a){a.fn.lifestream.feeds.blogger=function(b,e){var d=a.extend({},{posted:'posted <a href="${origLink}">${title}</a>'},b.template),c=function(m){var h=[],q,o=0,n,p,g,f;if(m.query&&m.query.count&&m.query.count>0&&m.query.results.feed.entry){q=m.query.results.feed.entry;n=q.length;for(;o<n;o++){p=q[o];if(!p.origLink){g=0;f=p.link.length;for(;g<f;g++){if(p.link[g].rel==="alternate"){p.origLink=p.link[g].href
}}}if(p.origLink){if(p.title.content){p.title=p.title.content}h.push({date:new Date(p.published),config:b,html:a.tmpl(d.posted,p)})}}}return h};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://'+b.user+'.blogspot.com/feeds/posts/default"'),dataType:"jsonp",success:function(f){e(c(f))}});return{template:d}}})(jQuery);(function(a){a.fn.lifestream.feeds.citeulike=function(b,e){var c=a.extend({},{saved:'saved <a href="${href}">${title}</a> by ${authors}'},b.template),d=function(l){var f=[],h=0,g;if(l&&l.length&&l.length>0){g=l.length;for(;h<g;h++){var k=l[h];f.push({date:new Date(k.date),config:b,url:"http://www.citeulike.org/user/"+b.user,html:a.tmpl(c.saved,k)})}}return f};a.ajax({url:"http://www.citeulike.org/json/user/"+b.user,dataType:"jsonp",success:function(f){e(d(f))}});return{template:c}}})(jQuery);(function(a){a.fn.lifestream.feeds.dailymotion=function(c,e){var d=a.extend({},{uploaded:'uploaded a video <a href="${link}">${title[0]}</a>'},c.template),b=function(g){var f=[],m,k=0,h,l;if(g.query&&g.query.count&&g.query.count>0&&g.query.results.rss.channel.item){m=g.query.results.rss.channel.item;h=m.length;for(;k<h;k++){l=m[k];f.push({date:new Date(l.pubDate),config:c,html:a.tmpl(d.uploaded,l)})}}return f};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://www.dailymotion.com/rss/user/'+c.user+'"'),dataType:"jsonp",success:function(f){e(b(f))}});return{template:d}}})(jQuery);(function(a){a.fn.lifestream.feeds.delicious=function(b,d){var c=a.extend({},{bookmarked:'bookmarked <a href="${u}">${d}</a>'},b.template);a.ajax({url:"http://feeds.delicious.com/v2/json/"+b.user,dataType:"jsonp",success:function(k){var e=[],g=0,f;if(k&&k.length&&k.length>0){f=k.length;for(;g<f;g++){var h=k[g];e.push({date:new Date(h.dt),config:b,html:a.tmpl(c.bookmarked,h)})}}d(e)}});return{template:c}}})(jQuery);(function(a){a.fn.lifestream.feeds.deviantart=function(b,d){var c=a.extend({},{posted:'posted <a href="${link}">${title}</a>'},b.template);a.ajax({url:a.fn.lifestream.createYqlUrl('select title,link,pubDate from rss where url="http://backend.deviantart.com/rss.xml?q=gallery%3A'+encodeURIComponent(b.user)+'&type=deviation" | unique(field="title")'),dataType:"jsonp",success:function(l){var f=[],e,k,h=0,g;if(l.query&&l.query.count>0){e=l.query.results.item;g=e.length;for(;h<g;h++){k=e[h];f.push({date:new Date(k.pubDate),config:b,html:a.tmpl(c.posted,k)})}}d(f)}});return{template:c}}})(jQuery);(function(a){a.fn.lifestream.feeds.disqus=function(b,e){var d=a.extend({},{post:'commented on <a href="${url}">${thread.title}</a>',thread_like:'liked <a href="${url}">${thread.title}</a>'},b.template),c=function(g){var f=[],k=0,h,l;if(g){h=g.length;for(;k<h;k++){l=g[k];if(l.type!=="reply"){f.push({date:new Date(l.createdAt),config:b,html:a.tmpl(d[l.type],l.object)})}}}return f};a.ajax({url:"https://disqus.com/api/3.0/users/listActivity.json",data:{user:b.user,api_key:b.key},dataType:"jsonp",success:function(f){if(f.code===2){e([]);if(console&&console.error){console.error("Error loading Disqus stream.",f.response)}return}else{e(c(f.response))}}});return{template:d}}})(jQuery);(function(a){a.fn.lifestream.feeds.dribbble=function(b,d){var c=a.extend({},{posted:'posted a shot <a href="${url}">${title}</a>'},b.template);a.ajax({url:"http://api.dribbble.com/players/"+b.user+"/shots",dataType:"jsonp",success:function(k){var e=[],g=0,f;if(k&&k.total){f=k.shots.length;for(;g<f;g++){var h=k.shots[g];e.push({date:new Date(h.created_at),config:b,html:a.tmpl(c.posted,h)})}}d(e)}});return{template:c}}})(jQuery);(function(a){a.fn.lifestream.feeds.facebook_page=function(c,e){var d=a.extend({},{wall_post:'post on wall <a href="${link}">${title}</a>'},c.template),b=function(g){var f=[],m,k=0,h;if(g.query&&g.query.count&&g.query.count>0){m=g.query.results.rss.channel.item;h=m.length;for(;k<h;k++){var l=m[k];if(a.trim(l.title)){f.push({date:new Date(l.pubDate),config:c,html:a.tmpl(d.wall_post,l)})}}}return f};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="www.facebook.com/feeds/page.php?id='+c.user+'&format=rss20"'),dataType:"jsonp",success:function(f){e(b(f))}});return{template:d}}})(jQuery);(function(a){a.fn.lifestream.feeds.fancy=function(b,e){var c=a.extend({},{fancied:'fancy\'d <a href="${link}">${title}</a>'},b.template),d=function(g){var f=[],k=0,h;if(g.query&&g.query.count&&g.query.count>0){h=g.query.count;for(;k<h;k++){var l=g.query.results.item[k];f.push({date:new Date(l.pubDate),config:b,html:a.tmpl(c.fancied,l)})}}return f};a.ajax({url:a.fn.lifestream.createYqlUrl('SELECT * FROM xml WHERE url="http://www.fancy.com/rss/'+b.user+'" AND itemPath="/rss/channel/item"'),dataType:"jsonp",success:function(f){e(d(f))}});return{template:c}}})(jQuery);(function(a){a.fn.lifestream.feeds.flickr=function(b,d){var c=a.extend({},{posted:'posted a photo <a href="${link}">${title}</a>'},b.template);a.ajax({url:"http://api.flickr.com/services/feeds/photos_public.gne?id="+b.user+"&lang=en-us&format=json",dataType:"jsonp",jsonp:"jsoncallback",success:function(k){var e=[],g=0,f;
if(k&&k.items&&k.items.length>0){f=k.items.length;for(;g<f;g++){var h=k.items[g];e.push({date:new Date(h.published),config:b,html:a.tmpl(c.posted,h)})}}d(e)}});return{template:c}}})(jQuery);(function(a){a.fn.lifestream.feeds.foomark=function(b,d){var c=a.extend({},{bookmarked:'bookmarked <a href="${url}">${url}</a>'},b.template);a.ajax({url:"http://api.foomark.com/urls/list/",data:{format:"jsonp",username:b.user},dataType:"jsonp",success:function(k){var e=[],g=0,f;if(k&&k.length&&k.length>0){f=k.length;for(;g<f;g++){var h=k[g];e.push({date:new Date(h.created_at.replace(/-/g,"/")),config:b,html:a.tmpl(c.bookmarked,h)})}}d(e)}});return{template:c}}})(jQuery);(function(a){a.fn.lifestream.feeds.formspring=function(c,e){var d=a.extend({},{answered:'answered a question <a href="${link}">${title}</a>'},c.template);var b=function(g){var f=[],m,k=0,h,l;if(g.query&&g.query.count&&g.query.count>0&&g.query.results.rss.channel.item){m=g.query.results.rss.channel.item;h=m.length;for(;k<h;k++){l=m[k];f.push({date:new Date(l.pubDate),config:c,html:a.tmpl(d.answered,l)})}}return f};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://www.formspring.me/profile/'+c.user+'.rss"'),dataType:"jsonp",success:function(f){e(b(f))}});return{template:d}}})(jQuery);(function(a){a.fn.lifestream.feeds.forrst=function(b,d){var c=a.extend({},{posted:'posted a ${post_type} <a href="${post_url}">${title}</a>'},b.template);a.ajax({url:"http://forrst.com/api/v2/users/posts?username="+b.user,dataType:"jsonp",success:function(k){var e=[],g=0,f;if(k&&k.resp.length&&k.resp.length>0){f=k.resp.length;for(;g<f;g++){var h=k.resp[g];e.push({date:new Date(h.created_at.replace(" ","T")),config:b,html:a.tmpl(c.posted,h)})}}d(e)}});return{template:c}}})(jQuery);(function(a){a.fn.lifestream.feeds.foursquare=function(b,e){var c=a.extend({},{checkedin:'checked in @ <a href="${link}">${title}</a>'},b.template),d=function(g){var f=[],k=0,h;if(g.query&&g.query.count&&g.query.count>0){h=g.query.count;for(;k<h;k++){var l=g.query.results.item[k];f.push({date:new Date(l.pubDate),config:b,html:a.tmpl(c.checkedin,l)})}}return f};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from rss where url="https://feeds.foursquare.com/history/'+b.user+'.rss"'),dataType:"jsonp",success:function(f){e(d(f))}});return{template:c}}})(jQuery);(function(a){a.fn.lifestream.feeds.gimmebar=function(b,d){var c=a.extend({},{bookmarked:'bookmarked <a href="${short_url}">${title}</a>'},b.template);a.ajax({url:"https://gimmebar.com/api/v0/public/assets/"+b.user+".json?jsonp_callback=?",dataType:"json",success:function(k){k=k.records;var e=[],g=0,f;if(k&&k.length&&k.length>0){f=k.length;for(;g<f;g++){var h=k[g];e.push({date:new Date(h.date*1000),config:b,html:a.tmpl(c.bookmarked,h)})}}d(e)}});return{template:c}}})(jQuery);(function(a){a.fn.lifestream.feeds.github=function(b,f){var d=a.extend({},{commitCommentEvent:'commented on <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',createBranchEvent:'created branch <a href="http://github.com/${status.repo.name}/tree/${status.payload.ref}">${status.payload.ref}</a> at <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',createRepositoryEvent:'created repository <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',createTagEvent:'created tag <a href="http://github.com/${status.repo.name}/tree/${status.payload.ref}">${status.payload.ref}</a> at <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',deleteBranchEvent:'deleted branch ${status.payload.ref} at <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',deleteTagEvent:'deleted tag ${status.payload.ref} at <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',followEvent:'started following <a href="http://github.com/${status.payload.target.login}">${status.payload.target.login}</a>',forkEvent:'forked <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',gistEvent:'${status.payload.action} gist <a href="http://gist.github.com/${status.payload.gist.id}">${status.payload.gist.id}</a>',issueCommentEvent:'commented on issue <a href="http://github.com/${status.repo.name}/issues/${status.payload.issue.number}">${status.payload.issue.number}</a> on <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',issuesEvent:'${status.payload.action} issue <a href="http://github.com/${status.repo.name}/issues/${status.payload.issue.number}">${status.payload.issue.number}</a> on <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',pullRequestEvent:'${status.payload.action} pull request <a href="http://github.com/${status.repo.name}/pull/${status.payload.number}">${status.payload.number}</a> on <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',pushEvent:'pushed to <a href="http://github.com/${status.repo.name}/tree/${status.payload.ref}">${status.payload.ref}</a> at <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>',watchEvent:'started watching <a href="http://github.com/${status.repo.name}">${status.repo.name}</a>'},b.template),c=function(g){if(g.type==="CommitCommentEvent"){return a.tmpl(d.commitCommentEvent,{status:g})
}else{if(g.type==="CreateEvent"&&g.payload.ref_type==="branch"){return a.tmpl(d.createBranchEvent,{status:g})}else{if(g.type==="CreateEvent"&&g.payload.ref_type==="repository"){return a.tmpl(d.createRepositoryEvent,{status:g})}else{if(g.type==="CreateEvent"&&g.payload.ref_type==="tag"){return a.tmpl(d.createTagEvent,{status:g})}else{if(g.type==="DeleteEvent"&&g.payload.ref_type==="branch"){return a.tmpl(d.deleteBranchEvent,{status:g})}else{if(g.type==="DeleteEvent"&&g.payload.ref_type==="tag"){return a.tmpl(d.deleteTagEvent,{status:g})}else{if(g.type==="FollowEvent"){return a.tmpl(d.followEvent,{status:g})}else{if(g.type==="ForkEvent"){return a.tmpl(d.forkEvent,{status:g})}else{if(g.type==="GistEvent"){if(g.payload.action==="create"){g.payload.action="created"}else{if(g.payload.action==="update"){g.payload.action="updated"}}return a.tmpl(d.gistEvent,{status:g})}else{if(g.type==="IssueCommentEvent"){return a.tmpl(d.issueCommentEvent,{status:g})}else{if(g.type==="IssuesEvent"){return a.tmpl(d.issuesEvent,{status:g})}else{if(g.type==="PullRequestEvent"){return a.tmpl(d.pullRequestEvent,{status:g})}else{if(g.type==="PushEvent"){g.payload.ref=g.payload.ref.split("/")[2];return a.tmpl(d.pushEvent,{status:g})}else{if(g.type==="WatchEvent"){return a.tmpl(d.watchEvent,{status:g})}}}}}}}}}}}}}}},e=function(k){var h=[],m=0,l;if(k.query&&k.query.count&&k.query.count>0){l=k.query.count;for(;m<l;m++){var g=k.query.results.json[m].json;h.push({date:new Date(g.created_at),config:b,html:c(g),url:"https://github.com/"+b.user})}}return h};a.ajax({url:a.fn.lifestream.createYqlUrl('select json.type, json.actor, json.repo, json.payload, json.created_at from json where url="https://api.github.com/users/'+b.user+'/events/public?per_page=100"'),dataType:"jsonp",success:function(g){f(e(g))}});return{template:d}}})(jQuery);(function(a){a.fn.lifestream.feeds.googleplus=function(b,e){var c=a.extend({},{posted:'<a href="${actor.url}">${actor.displayName}</a> has posted a new entry <a href="${url}" title="${id}">${title}</a> <!--With--> ${object.replies.totalItems} replies, ${object.plusoners.totalItems} +1s, ${object.resharers.totalItems} Reshares'},b.template),d=function(g){var f=[],k=0,h,l;if(g&&g.items){h=g.items.length;for(;k<h;k++){l=g.items[k];f.push({date:new Date(l.published),config:b,html:a.tmpl(c.posted,l)})}}return f};a.ajax({url:"https://www.googleapis.com/plus/v1/people/"+b.user+"/activities/public",data:{key:b.key},dataType:"jsonp",success:function(f){if(f.error){e([]);if(console&&console.error){console.error("Error loading Google+ stream.",f.error)}return}else{e(d(f))}}});return{template:c}}})(jQuery);(function(a){a.fn.lifestream.feeds.hypem=function(b,d){if(!b.type||b.type!=="history"||b.type!=="loved"){b.type="loved"}var c=a.extend({},{loved:'loved <a href="http://hypem.com/item/${mediaid}">${title}</a> by <a href="http://hypem.com/artist/${artist}">${artist}</a>',history:'listened to <a href="http://hypem.com/item/${mediaid}">${title}</a> by <a href="http://hypem.com/artist/${artist}">${artist}</a>'},b.template);a.ajax({url:"http://hypem.com/playlist/"+b.type+"/"+b.user+"/json/1/data.js",dataType:"json",success:function(m){var f=[],h=0,g=-1;for(var e in m){if(m.hasOwnProperty(e)){g++}}if(m&&g>0){for(;h<g;h++){var l=m[h];f.push({date:new Date((b.type==="history"?l.dateplayed:l.dateloved)*1000),config:b,html:a.tmpl((b.type==="history"?c.history:c.loved),l)})}}d(f)}});return{template:c}}})(jQuery);(function(a){a.fn.lifestream.feeds.instapaper=function(c,e){var d=a.extend({},{loved:'loved <a href="${link}">${title}</a>'},c.template),b=function(g){var f=[],m,k=0,h,l;if(g.query&&g.query.count&&g.query.count>0&&g.query.results.rss.channel.item){m=g.query.results.rss.channel.item;h=m.length;for(;k<h;k++){l=m[k];f.push({date:new Date(l.pubDate),config:c,html:a.tmpl(d.loved,l)})}}return f};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://www.instapaper.com/starred/rss/'+c.user+'"'),dataType:"jsonp",success:function(f){e(b(f))}});return{template:d}}})(jQuery);(function(a){a.fn.lifestream.feeds.iusethis=function(c,e){var d=a.extend({},{global:'${action} <a href="${link}">${what}</a> on (${os})'},c.template);var b=function(z){var h=[],w,v,u,r,p,o=0,g,A,y,t,q,x,s,f=["iPhone","OS X","Windows"];if(z.query&&z.query.count&&z.query.count>0&&z.query.results.rss){g=z.query.results.rss.length;t=["started using","stopped using","stopped loving","Downloaded","commented on","updated entry for","started loving","registered"];p=t.length;for(;o<g;o++){s=f[o];w=z.query.results.rss[o].channel.item;v=0;u=w.length;for(;v<u;v++){A=w[v];y=A.title.replace(c.user+" ","");r=0;for(;r<p;r++){if(y.indexOf(t[r])>-1){q=t[r];break}}x=y.split(q);h.push({date:new Date(A.pubDate),config:c,html:a.tmpl(d.global,{action:q.toLowerCase(),link:A.link,what:x[1],os:s})})}}}return h};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://iphone.iusethis.com/user/feed.rss/'+c.user+'" or url="http://osx.iusethis.com/user/feed.rss/'+c.user+'" or url="http://win.iusethis.com/user/feed.rss/'+c.user+'"'),dataType:"jsonp",success:function(f){e(b(f))
}});return{template:d}}})(jQuery);(function(a){a.fn.lifestream.feeds.lastfm=function(c,e){var d=a.extend({},{loved:'loved <a href="${url}">${name}</a> by <a href="${artist.url}">${artist.name}</a>'},c.template),b=function(g){var f=[],n,k=0,h;if(g.query&&g.query.count&&g.query.count>0&&g.query.results.lovedtracks&&g.query.results.lovedtracks.track){n=g.query.results.lovedtracks.track;h=n.length;for(;k<h;k++){var l=n[k],m=l.nowplaying?new Date():l.date.uts;f.push({date:new Date(parseInt((m*1000),10)),config:c,html:a.tmpl(d.loved,l)})}}return f};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://ws.audioscrobbler.com/2.0/user/'+c.user+'/lovedtracks.xml"'),dataType:"jsonp",success:function(f){e(b(f))}});return{template:d}}})(jQuery);(function(a){a.fn.lifestream.feeds.librarything=function(c,e){var d=a.extend({},{book:'added <a href="http://www.librarything.com/work/book/${book.book_id}" title="${book.title} by ${book.author_fl}">${book.title} by ${book.author_fl}</a> to my library'},c.template),b=function(g){var f=[],j="";if(g.books){for(j in g.books){if(g.books.hasOwnProperty(j)){var h=g.books[j];f.push({date:new Date(h.entry_stamp*1000),config:c,html:a.tmpl(d.book,{book:h}),url:"http://www.librarything.com/profile/"+c.user})}}}return f};a.ajax({url:"http://www.librarything.com/api_getdata.php?booksort=entry_REV&userid="+c.user,dataType:"jsonp",success:function(f){e(b(f))}});return{template:d}}})(jQuery);(function(a){a.fn.lifestream.feeds.linkedin=function(d,g){var e=a.extend({},{posted:'<a href="${link}">${title}</a>'},d.template),b="jlsLinkedinCallback"+d.user,c=function(){var h='SELECT * FROM feed WHERE url="'+d.url+'"';if(d.user){h+=' AND link LIKE "%'+d.user+'%"'}return h},f=function(h){return{date:new Date(h.pubDate),config:d,html:a.tmpl(e.posted,h)}};window[b]=function(j){var h=[],k=0;if(j.query&&j.query.count&&j.query.count>0){if(j.query.count===1){h.push(f(j.query.results.item))}else{for(k;k<j.query.count;k++){var l=j.query.results.item[k];h.push(f(l))}}}g(h)};a.ajax({url:a.fn.lifestream.createYqlUrl(c()),cache:true,data:{_maxage:300},dataType:"jsonp",jsonpCallback:b});return{template:e}}})(jQuery);(function(a){a.fn.lifestream.feeds.mendeley=function(c,e){var d=a.extend({},{flagged1:'flagged <a href="http://www.mendeley.com${link}">${title}</a>',flagged2:'flagged <a href="${link}">${title}</a>'},c.template),b=function(g){var f=[],m,k=0,h;if(g.query&&g.query.count&&g.query.count>0){m=g.query.results.rss.channel.item;h=m.length;for(;k<h;k++){var l=m[k];var n=((l.link.charAt(0)==="/")?d.flagged1:d.flagged2);f.push({date:new Date(l.pubDate),config:c,url:"http://mendeley.com/groups/"+c.user,html:a.tmpl(n,l)})}}return f};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://www.mendeley.com/groups/'+c.user+'/feed/rss/"'),dataType:"jsonp",success:function(f){e(b(f))}});return{template:d}}})(jQuery);(function(a){a.fn.lifestream.feeds.miso=function(b,e){var d=a.extend({},{watched:'checked in to <a href="${link}">${title}</a>'},b.template),c=function(g){var f=[],m,k=0,h;if(g.query&&g.query.count&&g.query.count>0){m=g.query.results.rss.channel.item;h=m.length;for(;k<h;k++){var l=m[k];f.push({url:"http://www.gomiso.com/feeds/user/"+b.user+"/checkins.rss",date:new Date(l.pubDate),config:b,html:a.tmpl(d.watched,l)})}}return f};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://www.gomiso.com/feeds/user/'+b.user+'/checkins.rss"'),dataType:"jsonp",success:function(f){e(c(f))}});return{template:d}}})(jQuery);(function(a){a.fn.lifestream.feeds.mlkshk=function(c,e){var d=a.extend({},{posted:'posted <a href="${link}">${title}</a>'},c.template);var b=function(g){var f=[],m,k=0,h,l;if(g.query&&g.query.count&&g.query.count>0&&g.query.results.rss.channel.item){m=g.query.results.rss.channel.item;h=m.length;for(;k<h;k++){l=m[k];f.push({date:new Date(l.pubDate),config:c,html:a.tmpl(d.posted,l)})}}return f};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://mlkshk.com/user/'+c.user+'/rss"'),dataType:"jsonp",success:function(f){e(b(f))}});return{template:d}}})(jQuery);(function(a){a.fn.lifestream.feeds.pinboard=function(b,e){var d=a.extend({},{bookmarked:'bookmarked <a href="${link}">${title}</a>'},b.template);var c=function(g){var f=[],m,k=0,h,l;if(g.query&&g.query.count&&g.query.count>0){m=g.query.results.RDF.item;h=m.length;for(;k<h;k++){l=m[k];f.push({date:new Date(l.date),config:b,html:a.tmpl(d.bookmarked,l)})}}return f};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://feeds.pinboard.in/rss/u:'+b.user+'"'),dataType:"jsonp",success:function(f){e(c(f))}});return{template:d}}})(jQuery);(function(a){a.fn.lifestream.feeds.pocket=function(c,e){var d=a.extend({},{pocketed:'pocketed <a href="${link}">${title}</a>'},c.template),b=function(g){var f=[],m,k=0,h;if(g.query&&g.query.results){m=g.query.results.rss.channel.item;h=m.length;for(;k<h;k++){var l=m[k];var n=d.pocketed;f.push({date:new Date(l.pubDate),config:c,url:"http://getpocket.com",html:a.tmpl(n,l),})
}}return f};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://www.getpocket.com/users/'+c.user+'/feed/all/"'),dataType:"json",success:function(f){e(b(f))}});return{template:d}}})(jQuery);(function(a){a.fn.lifestream.feeds.posterous=function(c,e){var d=a.extend({},{posted:'posted <a href="${link}">${title}</a>'},c.template);var b=function(g){var f=[],m,k=0,h,l;if(g.query&&g.query.count&&g.query.count>0&&g.query.results.rss.channel.item){m=g.query.results.rss.channel.item;h=m.length;for(;k<h;k++){l=m[k];f.push({date:new Date(l.pubDate),config:c,html:a.tmpl(d.posted,l)})}}return f};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://'+c.user+'.posterous.com/rss.xml"'),dataType:"jsonp",success:function(f){e(b(f))}});return{template:d}}})(jQuery);(function(a){a.fn.lifestream.feeds.quora=function(c,f){var d=a.extend({},{posted:'<a href="${link}">${title}</a>'},c.template),b=function(l){var h=0,g=l.link.length;for(;h<g;h++){var k=l.link[h];if(typeof k==="string"){return k}}return""},e=function(h){var g=[],o=[],m=0,l=0,k="";if(h.query&&h.query.count&&h.query.count>0){o=h.query.results.rss.channel.item;l=o.length;k=b(h.query.results.rss.channel);for(;m<l;m++){var n=o[m];g.push({url:k,date:new Date(n.pubDate),config:c,html:a.tmpl(d.posted,n)})}}return g};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://www.quora.com/'+c.user+'/rss"'),dataType:"jsonp",success:function(g){f(e(g))}});return{template:d}}})(jQuery);(function(a){a.fn.lifestream.feeds.reddit=function(b,f){var d=a.extend({},{commented:'<a href="http://www.reddit.com/r/${item.data.subreddit}/comments/${item.data.link_id.substring(3)}/u/${item.data.name.substring(3)}?context=3">commented (${score})</a> in <a href="http://www.reddit.com/r/${item.data.subreddit}">${item.data.subreddit}</a>',created:'<a href="http://www.reddit.com${item.data.permalink}">created new thread (${score})</a> in <a href="http://www.reddit.com/r/${item.data.subreddit}">${item.data.subreddit}</a>'},b.template);var e=function(h){var i=h.data.ups-h.data.downs,g={item:h,score:(i>0)?"+"+i:i};if(h.kind==="t1"){return a.tmpl(d.commented,g)}else{if(h.kind==="t3"){return a.tmpl(d.created,g)}}},c=function(g){return new Date(g*1000)};a.ajax({url:"http://www.reddit.com/user/"+b.user+".json",dataType:"jsonp",jsonp:"jsonp",success:function(m){var g=[],k=0,h;if(m&&m.data&&m.data.children&&m.data.children.length>0){h=m.data.children.length;for(;k<h;k++){var l=m.data.children[k];g.push({date:c(l.data.created_utc),config:b,html:e(l),url:"http://reddit.com/user/"+b.user})}}f(g)}});return{template:d}}})(jQuery);(function(a){a.fn.lifestream.feeds.rss=function(c,f){var d=a.extend({},{posted:'posted <a href="${link}">${title}</a>'},c.template),b=function(l){var h=0,g=l.link.length;for(;h<g;h++){var k=l.link[h];if(typeof k==="string"){return k}}return""},e=function(h){var g=[],o=[],m=0,l=0,k="";if(h.query&&h.query.count&&h.query.count>0){o=h.query.results.rss.channel.item;l=o.length;k=b(h.query.results.rss.channel);for(;m<l;m++){var n=o[m];g.push({url:k,date:new Date(n.pubDate),config:c,html:a.tmpl(d.posted,n)})}}return g};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="'+c.user+'"'),dataType:"jsonp",success:function(g){f(e(g))}});return{template:d}}})(jQuery);(function(a){a.fn.lifestream.feeds.slideshare=function(b,e){var c=a.extend({},{uploaded:'uploaded a presentation <a href="${link}">${title}</a>'},b.template);var d=function(g){var f=[],m,k=0,h,l;if(g.query&&g.query.count&&g.query.count>0){m=g.query.results.rss.channel.item;h=m.length;for(;k<h;k++){l=m[k];f.push({date:new Date(l.pubDate),config:b,html:a.tmpl(c.uploaded,l)})}}return f};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://www.slideshare.net/rss/user/'+b.user+'"'),dataType:"jsonp",success:function(f){e(d(f))}});return{template:c}}})(jQuery);(function(a){a.fn.lifestream.feeds.snipplr=function(b,e){var c=a.extend({},{posted:'posted a snippet <a href="${link}">${title}</a>'},b.template);var d=function(g){var f=[],m,k=0,h,l;if(g.query&&g.query.count&&g.query.count>0&&g.query.results.rss.channel.item){m=g.query.results.rss.channel.item;h=m.length;for(;k<h;k++){l=m[k];f.push({date:new Date(l.pubDate),config:b,html:a.tmpl(c.posted,l)})}}return f};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="http://snipplr.com/rss/users/'+b.user+'"'),dataType:"jsonp",success:function(f){e(d(f))}})}})(jQuery);(function(a){a.fn.lifestream.feeds.stackoverflow=function(b,f){var d=a.extend({},{global:'<a href="${link}">${text}</a> - ${title}'},b.template);var e=function(j){var l="",k="",i="",h="http://stackoverflow.com/users/"+b.user,g="http://stackoverflow.com/questions/";if(j.timeline_type==="badge"){l="was "+j.action+" the '"+j.description+"' badge";k=j.detail;i=h+"?tab=reputation"}else{if(j.timeline_type==="comment"){l="commented on";k=j.description;i=g+j.post_id}else{if(j.timeline_type==="revision"||j.timeline_type==="accepted"||j.timeline_type==="askoranswered"){l=(j.timeline_type==="askoranswered"?j.action:j.action+" "+j.post_type);
k=j.detail||j.description||"";i=g+j.post_id}}}return{link:i,title:k,text:l}},c=function(g){return new Date(g*1000)};a.ajax({url:"https://api.stackoverflow.com/1.1/users/"+b.user+"/timeline?jsonp",dataType:"jsonp",jsonp:"jsonp",success:function(m){var g=[],k=0,h;if(m&&m.total&&m.total>0&&m.user_timelines){h=m.user_timelines.length;for(;k<h;k++){var l=m.user_timelines[k];g.push({date:c(l.creation_date),config:b,html:a.tmpl(d.global,e(l))})}}f(g)}});return{template:d}}})(jQuery);(function(a){a.fn.lifestream.feeds.tumblr=function(b,k){var i=a.extend({},{posted:'posted a ${type} <a href="${url}">${title}</a>'},b.template),e=b.limit||20,j=function(n){switch(n.type){case"photo":var l=n["photo-url"];return a('<img width="75" height="75"/>').attr({src:l[l.length-1].content,title:d(n),alt:d(n)}).wrap("<div/>").parent().html();case"video":var m=n["video-player"];var o=m[m.length-1].content;if(o.match(/<\s*script/)){return null}return o;case"audio":return n["audio-player"]+" "+a("<div/>").text(d(n)).html();default:return null}},g=function(m,l){return a(m[l]).filter(":not(:empty):first").text()},c=function(l){var m;switch(l.type){case"regular":return l["regular-title"]||g(l,"regular-body");case"link":m=l["link-text"]||g(l,"link-description");if(m===""){m=l["link-url"]}return m;case"video":return g(l,"video-caption");case"audio":return g(l,"audio-caption");case"photo":return g(l,"photo-caption");case"quote":return'"'+l["quote-text"].replace(/<.+?>/g," ").trim()+'"';case"conversation":m=l["conversation-title"];if(!m){m=l.conversation.line;if(typeof(m)!=="string"){m=m[0].label+" "+m[0].content+" ..."}}return m;case"answer":return l.question;default:return l.type}},d=function(l){var m=c(l)||"";return m.replace(/<.+?>/gi," ")},f=function(l,m){return{date:new Date(m.date),config:l,html:a.tmpl(i.posted,{type:m.type.replace("regular","blog entry"),url:m.url,image:j(m),title:d(m)})}},h=function(m){var l=[],p=0,n,o;if(m.query&&m.query.count&&m.query.count>0){if(a.isArray(m.query.results.posts.post)){n=m.query.results.posts.post.length;for(;p<n;p++){o=m.query.results.posts.post[p];l.push(f(b,o))}}else{if(a.isPlainObject(m.query.results.posts.post)){l.push(f(b,m.query.results.posts.post))}}}return l};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from tumblr.posts where username="'+b.user+'" and num="'+e+'"'),dataType:"jsonp",success:function(l){k(h(l))}});return{template:i}}})(jQuery);(function(a){a.fn.lifestream.feeds.twitter=function(c,g){var e=a.extend({},{posted:"{{html tweet}}"},c.template),b="jlsTwitterCallback"+c.user.replace(/[^a-zA-Z0-9]+/g,""),f=function(k){var i=function(l){return l.replace(/([a-z]+:\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/ig,function(n){return'<a href="'+n+'">'+((n.length>25)?n.substr(0,24)+"...":n)+"</a>"})},h=function(l){return l.replace(/(^|[^\w]+)\@([a-zA-Z0-9_]{1,15})/g,function(n,p,o){return p+'<a href="http://twitter.com/'+o+'">@'+o+"</a>"})},j=function(l){return l.replace(/(^|[^\w'"]+)\#([a-zA-Z0-9ÅåÄäÖöØøÆæÉéÈèÜüÊêÛûÎî_]+)/g,function(n,p,o){return p+'<a href="http://search.twitter.com/search?q=%23'+o+'">#'+o+"</a>"})};return j(h(i(k)))},d=function(l){var k=[],n=0,m=l.length;for(n;n<m;n++){var h=l[n];k.push({date:new Date(h.created_at*1000),config:c,html:a.tmpl(e.posted,{tweet:f(a("<div/>").html(h.text).text()),complete_url:"http://twitter.com/"+c.user+"/status/"+h.id_str}),url:"http://twitter.com/"+c.user})}return k};window[b]=function(h){if(h.query&&h.query.count>0){g(d(h.query.results.items))}};a.ajax({url:a.fn.lifestream.createYqlUrl('USE "http://arminrosu.github.io/twitter-open-data-table/table.xml" AS twitter; SELECT * FROM twitter WHERE screen_name = "'+c.user+'"'),cache:true,data:{_maxage:300},dataType:"jsonp",jsonpCallback:b});return{template:e}}})(jQuery);(function(a){a.fn.lifestream.feeds.vimeo=function(b,e){var c=a.extend({},{liked:'liked <a href="${url}" title="${description}">${title}</a>',posted:'posted <a href="${url}" title="${description}">${title}</a>'},b.template),d=function(n,k){var f=[],l=0,h,p,m=k||"liked",g,o;if(n){h=n.length;for(;l<h;l++){p=n[l];if(m==="posted"){g=new Date(p.upload_date.replace(" ","T"))}else{g=new Date(p.liked_on.replace(" ","T"))}if(p.description){o=p.description.replace(/"/g,"'").replace(/<.+?>/gi,"")}else{o=""}f.push({date:g,config:b,html:a.tmpl(c[m],{url:p.url,description:p.description?p.description.replace(/"/g,"'").replace(/<.+?>/gi,""):"",title:p.title})})}}return f};a.ajax({url:a.fn.lifestream.createYqlUrl('SELECT * FROM xml WHERE url="http://vimeo.com/api/v2/'+b.user+'/likes.xml" OR url="http://vimeo.com/api/v2/'+b.user+'/videos.xml"'),dataType:"jsonp",success:function(g){var f=[];if(g.query.results.videos[0]!=null&&g.query.results.videos[0].video.length>0){f=f.concat(d(g.query.results.videos[0].video))}if(g.query.results.videos[1]!=null&&g.query.results.videos[1].video.length>0){f=f.concat(d(g.query.results.videos[1].video,"posted"))}e(f)}});return{template:c}}})(jQuery);(function(a){a.fn.lifestream.feeds.wikipedia=function(b,e){var d=b.language||"en",c=a.extend({},{contribution:'contributed to <a href="${url}">${title}</a>'},b.template);
a.ajax({url:"http://"+d+".wikipedia.org/w/api.php?action=query&ucuser="+b.user+"&list=usercontribs&ucdir=older&format=json",dataType:"jsonp",success:function(l){var f=[],h=0,g;if(l&&l.query.usercontribs){g=l.query.usercontribs.length;for(;h<g;h++){var k=l.query.usercontribs[h];k.url="http://"+d+".wikipedia.org/wiki/"+k.title.replace(" ","_");f.push({date:new Date(k.timestamp),config:b,html:a.tmpl(c.contribution,k)})}}e(f)}});return{template:c}}})(jQuery);(function(a){a.fn.lifestream.feeds.wordpress=function(c,f){var e=a.extend({},{posted:'posted <a href="${link}">${title}</a>'},c.template);var d=function(h){var g=[],n,l=0,k,m;if(h.query&&h.query.count&&h.query.count>0&&h.query.results.rss.channel.item){n=h.query.results.rss.channel.item;k=n.length;for(;l<k;l++){m=n[l];g.push({date:new Date(m.pubDate),config:c,html:a.tmpl(e.posted,m)})}}return g};var b="";if(c.user){b=(c.user.indexOf("http://")===0?c.user+"/feed":"http://"+c.user+".wordpress.com/feed");a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="'+b+'"'),dataType:"jsonp",success:function(g){f(d(g))}})}return{template:e}}})(jQuery);(function(a){a.fn.lifestream.feeds.youtube=function(c,e){var d=a.extend({},{uploaded:'uploaded <a href="${video.player.default}" title="${video.description}">${video.title}</a>',favorited:'favorited <a href="${video.player.default}" title="${video.description}">${video.title}</a>'},c.template),b=function(o,h){var g=[],n=0,m,p,f,k,l;if(o.data&&o.data.items){m=o.data.items.length;for(;n<m;n++){p=o.data.items[n];switch(h){case"favorited":f=p.video;k=p.created;l=p;break;case"uploaded":f=p;k=f.uploaded;l={video:f};break}if(!f.player||!f.player["default"]){continue}g.push({date:new Date(k),config:c,html:a.tmpl(d[h],l)})}}return g};a.ajax({url:"http://gdata.youtube.com/feeds/api/users/"+c.user+"/favorites?v=2&alt=jsonc",dataType:"jsonp",success:function(f){e(b(f,"favorited"))}});a.ajax({url:"http://gdata.youtube.com/feeds/api/users/"+c.user+"/uploads?v=2&alt=jsonc",dataType:"jsonp",success:function(f){e(b(f,"uploaded"))}});return{template:d}}})(jQuery);(function(a){a.fn.lifestream.feeds.zotero=function(b,e){var c=a.extend({},{flagged:'flagged <a href="${id}">${title}</a> by ${creatorSummary}'},b.template),d=function(g){var f=[],m,k=0,h;if(g.query&&g.query.count&&g.query.count>0){m=g.query.results.feed.entry;h=m.length;for(;k<h;k++){var l=m[k];f.push({date:new Date(l.updated),config:b,url:"http://zotero.com/users/"+b.user,html:a.tmpl(c.flagged,l)})}}return f};a.ajax({url:a.fn.lifestream.createYqlUrl('select * from xml where url="https://api.zotero.org/users/'+b.user+'/items"'),dataType:"jsonp",success:function(f){e(d(f))}});return{template:c}}})(jQuery);